(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[179],{8552:function(e,t,s){Promise.resolve().then(s.bind(s,6266))},6266:function(e,t,s){"use strict";s.r(t);var n=s(9268),a=s(8921),r=s(8815),i=s.n(r),l=s(6006),o=s(6394),u=s.n(o);let c={Online:"#22A559",Idle:"#F0B232","Do Not Disturb":"#F23F43",Invisible:"#80848E",Offline:"#80848E"},d={16:6,24:8,32:10,40:12,80:16,120:24},h={16:5.5,24:16.5,32:22,40:28,80:60,120:90};t.default=e=>{let{setTooltip:t}=(0,a.Z)({context:"tooltip"}),s=d[e.size],r=h[e.size];return((0,l.useEffect)(()=>()=>t(null),[]),e.status)?(0,n.jsxs)("svg",{width:e.size+8,height:e.size+8,viewBox:"0 0 ".concat(e.size+8," ").concat(e.size+8),"aria-hidden":"true",className:i().svg,children:[(0,n.jsx)("foreignObject",{x:0,y:0,width:e.size,height:e.size,overflow:"visible",mask:"url(#status-mask-".concat(e.size,")"),children:(0,n.jsx)("div",{className:i().container,children:(0,n.jsx)(u(),{src:e.relativeSrc?e.src:"".concat("https://ucarecdn.com/").concat(e.src,"/-/preview/").concat(e.size,"x").concat(e.size,"/-/format/webp/"),alt:e.alt,width:e.size,height:e.size,draggable:!1,placeholder:e.size>40?"blur":void 0,blurDataURL:"/assets/blurs/avatar.png"})})}),(0,n.jsx)("rect",{onMouseEnter:s=>{e.tooltip&&t({text:e.status,element:s.target,position:"top",gap:e.tooltipGap||0})},onMouseLeave:()=>t(null),x:r,y:r,width:s,height:s,rx:s/2,ry:s/2,fill:c[e.status]})]}):(0,n.jsx)("div",{className:i().container,children:(0,n.jsx)(u(),{src:e.relativeSrc?e.src:"".concat("https://ucarecdn.com/").concat(e.src,"/-/preview/").concat(e.size,"x").concat(e.size,"/-/format/webp/"),alt:e.alt,width:e.size,height:e.size,draggable:!1,placeholder:e.size>40?"blur":void 0,blurDataURL:"/assets/blurs/avatar.png"})})}},3308:function(e,t,s){"use strict";s.r(t),s.d(t,{AuthContext:function(){return i}});var n=s(9268),a=s(6006),r=s(6008);let i=(0,a.createContext)(null);t.default=e=>{let{children:t}=e,[s,l]=(0,a.useState)(null),[o,u]=(0,a.useState)(!0),c=(0,r.useRouter)();return(0,a.useEffect)(()=>{let e=localStorage.getItem("auth");if(e){let{username:t,password:s}=JSON.parse(e).user;if(t&&s){let e=async()=>{let e=await fetch("".concat("http://localhost:3000/api","/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:s,client:"app"})}).then(e=>e.json());e.success?(l({accessToken:e.accessToken,user:{...e.user,password:s}}),localStorage.setItem("auth",JSON.stringify({accessToken:e.accessToken,user:{...e.user,password:s}})),c.push("/channels/me")):(u(!1),c.push("/login"))};e()}else u(!1),c.push("/login")}u(!1)},[]),(0,n.jsx)(i.Provider,{value:{auth:s,setAuth:l,loading:o,setLoading:u},children:t})}},2839:function(e,t,s){"use strict";s.r(t),s.d(t,{LayerContext:function(){return r}});var n=s(9268),a=s(6006);let r=(0,a.createContext)(null);t.default=e=>{let{children:t}=e,[s,i]=(0,a.useState)(!1),[l,o]=(0,a.useState)(null),[u,c]=(0,a.useState)(null),[d,h]=(0,a.useState)(null);return(0,n.jsx)(r.Provider,{value:{showSettings:s,setShowSettings:i,userProfile:l,setUserProfile:e=>{o(null),e&&setTimeout(()=>{o(e)},100)},popup:u,setPopup:c,fixedLayer:d,setFixedLayer:e=>{h(null),e&&setTimeout(()=>{h(e)},100)}},children:t})}},1909:function(e,t,s){"use strict";s.r(t),s.d(t,{SettingsContext:function(){return r}});var n=s(9268),a=s(6006);let r=(0,a.createContext)(null);t.default=e=>{let{children:t}=e,[s,i]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let e=localStorage.getItem("user-settings");e?i(JSON.parse(e)):i({language:"en-US",microphone:!1,sound:!0,camera:!1,notifications:!0,appearance:"default",font:"default",theme:"dark",friendTab:"add",sendButton:!1,showUsers:!0})},[]),(0,a.useEffect)(()=>{s&&localStorage.setItem("user-settings",JSON.stringify(s))},[s]),(0,n.jsx)(r.Provider,{value:{userSettings:s,setUserSettings:i},children:t})}},9209:function(e,t,s){"use strict";s.r(t),s.d(t,{TooltipContext:function(){return r}});var n=s(9268),a=s(6006);let r=(0,a.createContext)(null);t.default=e=>{let{children:t}=e,[s,i]=(0,a.useState)(null);return(0,n.jsx)(r.Provider,{value:{tooltip:s,setTooltip:i},children:t})}},8921:function(e,t,s){"use strict";var n=s(1909),a=s(9209),r=s(2839),i=s(3308),l=s(6006);t.Z=e=>{let{context:t}=e;return"auth"===t?(0,l.useContext)(i.AuthContext):"layer"===t?(0,l.useContext)(r.LayerContext):"settings"===t?(0,l.useContext)(n.SettingsContext):"tooltip"===t?(0,l.useContext)(a.TooltipContext):null}},8815:function(e){e.exports={container:"Avatar_container__RiURU",svg:"Avatar_svg__aph3T"}}},function(e){e.O(0,[891,253,769,744],function(){return e(e.s=8552)}),_N_E=e.O()}]);