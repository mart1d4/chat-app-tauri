(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626,931],{3184:function(e,t,s){Promise.resolve().then(s.bind(s,2299)),Promise.resolve().then(s.t.bind(s,4490,23))},2299:function(e,t,s){"use strict";s.r(t);var r=s(9268),a=s(6006),n=s(8921),o=s(4501),l=s(6008),i=s(4490),u=s.n(i),c=s(5846),d=s.n(c);t.default=()=>{let[e,t]=(0,a.useState)(!1),[s,i]=(0,a.useState)(""),[c,p]=(0,a.useState)(""),[h,f]=(0,a.useState)(""),{auth:_,setAuth:m,loading:b}=(0,n.Z)({context:"auth"}),g=(0,a.useRef)(null),v=(0,l.useRouter)();(0,a.useEffect)(()=>{!b&&(null==_?void 0:_.accessToken)&&v.push("/channels/me")},[b]),(0,a.useEffect)(()=>{let e=e=>{e.stopPropagation(),"Enter"===e.key&&x(e)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[s,c,e]),(0,a.useEffect)(()=>{var e;null===(e=g.current)||void 0===e||e.focus()},[]),(0,a.useEffect)(()=>{f("")},[s,c]);let x=async r=>{if(r.preventDefault(),e||!s||!c)return;t(!0);let a=await fetch("".concat("http://localhost:3000/api","/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s,password:c,client:"app"})}).then(e=>e.json());a.success?(m({accessToken:a.accessToken,user:{...a.user,password:c}}),localStorage.setItem("auth",JSON.stringify({accessToken:a.accessToken,user:{...a.user,password:c}})),i(""),p(""),t(!1),v.push("/channels/me")):(f(a.message||"An error occurred"),t(!1))};return(0,r.jsxs)("div",{className:u().loginBlock,children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"username",style:{color:h.length?"var(--error-light)":"var(--foreground-3)"},children:["Username",h.length?(0,r.jsxs)("span",{className:u().errorLabel,children:[" - ",h]}):(0,r.jsx)("span",{children:" *"})]}),(0,r.jsx)("div",{className:u().inputContainer,children:(0,r.jsx)("input",{ref:g,id:"username",type:"text",name:"username","aria-label":"Username",autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-labelledby":"username","aria-describedby":"username",value:s,onChange:e=>i(e.target.value)})})]}),(0,r.jsxs)("div",{style:{marginBottom:0},children:[(0,r.jsxs)("label",{htmlFor:"password",style:{color:h.length?"var(--error-light)":"var(--foreground-3)"},children:["Password",h.length?(0,r.jsxs)("span",{className:u().errorLabel,children:["- ",h]}):(0,r.jsx)("span",{children:"*"})]}),(0,r.jsx)("div",{className:u().inputContainer,children:(0,r.jsx)("input",{id:"password",type:"password",name:"password","aria-label":"Password",autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-labelledby":"password","aria-describedby":"password",value:c,onChange:e=>p(e.target.value)})})]}),(0,r.jsx)("button",{type:"button",className:u().passwordForgot,onClick:e=>{e.preventDefault(),v.push("/forgot-password")},children:"Forgot your password?"}),(0,r.jsx)("button",{type:"submit",className:u().buttonSubmit,onClick:e=>x(e),children:e?(0,r.jsx)(o.xg,{}):"Log In"}),(0,r.jsxs)("div",{className:u().bottomText,children:[(0,r.jsx)("span",{children:"Need an account?"}),(0,r.jsx)(d(),{href:"/register",children:"Register"})]})]})}},4490:function(e){e.exports={wrapper:"Auth_wrapper__Zn7VT",wrapperRegister:"Auth_wrapperRegister__M8Z_e",popIn:"Auth_popIn__jTlJD",loginContainer:"Auth_loginContainer__f_9TX",header:"Auth_header__zgmId",loginBlock:"Auth_loginBlock__bL_Lq",errorLabel:"Auth_errorLabel__4QfIn",inputContainer:"Auth_inputContainer__eevBb",passwordForgot:"Auth_passwordForgot__ETKbL",buttonSubmit:"Auth_buttonSubmit__F5_r_",bottomText:"Auth_bottomText__miBKJ"}}},function(e){e.O(0,[891,971,501,253,769,744],function(){return e(e.s=3184)}),_N_E=e.O()}]);